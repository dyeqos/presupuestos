"use strict";(self.webpackChunkpresupuestoFrontend=self.webpackChunkpresupuestoFrontend||[]).push([[792],{8792:(E,C,n)=>{n.r(C),n.d(C,{CuentasModule:()=>z});var p=n(9808),h=n(1083),s=n(3075),d=n(2349),t=n(5e3),Z=n(2797),g=n(9069),b=n(7423),m=n(9224),f=n(7322),T=n(7531),x=n(4107),v=n(508);function A(a,o){if(1&a&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.uid),t.xp6(1),t.hij(" ",e.nombre," ")}}function U(a,o){if(1&a&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.uid),t.xp6(1),t.hij(" ",e.nombre," ")}}function N(a,o){if(1&a&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.uid),t.xp6(1),t.hij(" ",e.nombre," ")}}let _=(()=>{class a{constructor(e,i,u,c,l){this.data=e,this.vs=i,this.cs=u,this.fb=c,this.dialogRef=l,this.cuenta=this.data.cuenta||{},this.bancos=this.data.bancos,this.tipo_cuentas=this.data.cuentas,this.usuarios=this.data.usuarios,this.formCuenta=this.fb.group({banco:["",[s.kI.required]],numero_cuenta:["",[s.kI.required]],tipo_cuenta:["",[s.kI.required]],usuario:["",[s.kI.required]],descripcion:["",[s.kI.required]]},{validators:[this.vs.esNumero("numero_cuenta")]})}ngOnInit(){this.cargarFormulario()}cargarFormulario(){this.cuenta.uid&&(this.formCuenta.controls.banco.setValue(this.cuenta.banco._id),this.formCuenta.controls.numero_cuenta.setValue(this.cuenta.numero_cuenta),this.formCuenta.controls.tipo_cuenta.setValue(this.cuenta.tipo_cuenta._id),this.formCuenta.controls.usuario.setValue(this.cuenta.usuario._id),this.formCuenta.controls.descripcion.setValue(this.cuenta.descripcion))}guardarCuenta(){this.formCuenta.invalid?this.formCuenta.markAllAsTouched():(this.cuenta.banco=this.formCuenta.controls.banco.value,this.cuenta.numero_cuenta=this.formCuenta.controls.numero_cuenta.value,this.cuenta.tipo_cuenta=this.formCuenta.controls.tipo_cuenta.value,this.cuenta.usuario=this.formCuenta.controls.usuario.value,this.cuenta.descripcion=this.formCuenta.controls.descripcion.value.trim().toUpperCase(),void 0!==this.cuenta.uid?this.cs.putCuenta(this.cuenta).subscribe(e=>{this.dialogRef.close(!0===e.ok)}):this.cs.postCuenta(this.cuenta).subscribe(e=>{this.dialogRef.close(!0===e.ok)}))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.WI),t.Y36(Z.o),t.Y36(g.S),t.Y36(s.qu),t.Y36(d.so))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-cuentas-modal"]],decls:47,vars:4,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],["appearance","fill"],["formControlName","banco"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","numero_cuenta"],["formControlName","tipo_cuenta"],["formControlName","usuario"],["matInput","","formControlName","descripcion"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card")(1,"form",0),t.NdJ("ngSubmit",function(){return i.guardarCuenta()}),t.TgZ(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Cuenta"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6,"Nuevo"),t.qZA()(),t.TgZ(7,"mat-dialog-content")(8,"mat-card-content")(9,"mat-form-field",1)(10,"mat-label"),t._uU(11,"Banco"),t.qZA(),t.TgZ(12,"mat-select",2),t.YNc(13,A,2,2,"mat-option",3),t.qZA(),t.TgZ(14,"mat-error"),t._uU(15," Revise el Banco "),t.qZA()(),t.TgZ(16,"mat-form-field",1)(17,"mat-label"),t._uU(18,"N\xfamero de Cuenta"),t.qZA(),t._UZ(19,"input",4),t.TgZ(20,"mat-error"),t._uU(21," Revise el N\xfamero de Cuenta "),t.qZA()(),t.TgZ(22,"mat-form-field",1)(23,"mat-label"),t._uU(24,"Tipo de Cuenta"),t.qZA(),t.TgZ(25,"mat-select",5),t.YNc(26,U,2,2,"mat-option",3),t.qZA(),t.TgZ(27,"mat-error"),t._uU(28," Revise el Tipo de Cuenta "),t.qZA()(),t.TgZ(29,"mat-form-field",1)(30,"mat-label"),t._uU(31,"Usuario"),t.qZA(),t.TgZ(32,"mat-select",6),t.YNc(33,N,2,2,"mat-option",3),t.qZA(),t.TgZ(34,"mat-error"),t._uU(35," Revise el Usuario "),t.qZA()(),t.TgZ(36,"mat-form-field",1)(37,"mat-label"),t._uU(38,"Descripci\xf3n Cuenta"),t.qZA(),t._UZ(39,"input",7),t.TgZ(40,"mat-error"),t._uU(41," Revise la descripci\xf3n de la cuenta "),t.qZA()()()(),t.TgZ(42,"mat-card-actions")(43,"button",8),t._uU(44,"Cancelar"),t.qZA(),t.TgZ(45,"button",9),t._uU(46,"Guardar"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.formCuenta),t.xp6(12),t.Q6J("ngForOf",i.bancos),t.xp6(13),t.Q6J("ngForOf",i.tipo_cuentas),t.xp6(7),t.Q6J("ngForOf",i.usuarios))},dependencies:[p.sg,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,b.lW,m.a8,m.dk,m.dn,m.n5,m.$j,m.hq,d.ZT,d.xY,f.TO,f.KE,f.hX,T.Nt,x.gD,v.ey],styles:["mat-form-field[_ngcontent-%COMP%]{display:block;margin-top:10px}"]}),a})();var M=n(5626),y=n(4188),Y=n(7261),q=n(5245),r=n(4999);function k(a,o){1&a&&(t.TgZ(0,"th",15),t._uU(1," BANCO "),t.qZA())}function B(a,o){if(1&a&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.Oqu(e.banco.nombre)}}function J(a,o){1&a&&(t.TgZ(0,"th",15),t._uU(1," N\xb0 DE CUENTA "),t.qZA())}function O(a,o){if(1&a&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.numero_cuenta," ")}}function F(a,o){1&a&&(t.TgZ(0,"th",15),t._uU(1," OPCIONES "),t.qZA())}function L(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",16)(1,"button",17),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.editar(c.uid))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",18),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.eliminar(c.uid))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function R(a,o){1&a&&t._UZ(0,"tr",19)}function S(a,o){1&a&&t._UZ(0,"tr",20)}function I(a,o){if(1&a&&(t.TgZ(0,"table",7),t.ynx(1,8),t.YNc(2,k,2,0,"th",9),t.YNc(3,B,2,1,"td",10),t.BQk(),t.ynx(4,11),t.YNc(5,J,2,0,"th",9),t.YNc(6,O,2,1,"td",10),t.BQk(),t.ynx(7,12),t.YNc(8,F,2,0,"th",9),t.YNc(9,L,7,0,"td",10),t.BQk(),t.YNc(10,R,1,0,"tr",13),t.YNc(11,S,1,0,"tr",14),t.qZA()),2&a){const e=t.oxw();t.Q6J("dataSource",e.cuentasList),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayHeader),t.xp6(1),t.Q6J("matRowDefColumns",e.displayHeader)}}function Q(a,o){1&a&&(t.TgZ(0,"div",21),t._uU(1," Sin cuentas para mostrar... "),t.qZA())}const D=[{path:"",children:[{path:"",component:(()=>{class a{constructor(e,i,u,c,l){this.ps=e,this.us=i,this.cs=u,this._snackBar=c,this.dialog=l,this.displayHeader=["banco","numero_cuenta","opcion"]}ngOnInit(){this.getCuentas(),this.getBancos(),this.getUsuarios(),this.getTipoCuentas()}getCuentas(){this.cs.getCuentas().subscribe(e=>{this.cuentasList=!0===e.ok?e.data:[]})}editar(e){this.cs.getCuentas(e).subscribe(i=>{!0===i.ok&&this.dialog.open(_,{width:"500px",disableClose:!0,data:{bancos:this.bancosList,usuarios:this.usuarioList,cuentas:this.tipoCuentasList,cuenta:i.data}}).afterClosed().subscribe(u=>{!0===u?(this.getCuentas(),this.abrirSnackBar("Modificaci\xf3n Exitosa")):!1===u&&this.abrirSnackBar("Error al Modificar")})})}eliminar(e){}abrirModal(){this.dialog.open(_,{width:"500px",disableClose:!0,data:{bancos:this.bancosList,usuarios:this.usuarioList,cuentas:this.tipoCuentasList}})}getBancos(){this.ps.getBancos().subscribe(e=>{this.bancosList=!0===e.ok?e.data:[]})}getUsuarios(){this.us.getUsuarios().subscribe(e=>{this.usuarioList=!0===e.ok?e.data:[]})}getTipoCuentas(){this.ps.getTiposCuentas().subscribe(e=>{this.tipoCuentasList=!0===e.ok?e.data:[]})}abrirSnackBar(e){this._snackBar.open(e.toString(),"Aceptar",{horizontalPosition:"end",verticalPosition:"top",duration:1500})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(M.u),t.Y36(y.i),t.Y36(g.S),t.Y36(Y.ux),t.Y36(d.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-cuentas"]],decls:14,vars:2,consts:[[1,"row"],[1,"col"],[1,"titulo"],["mat-raised-button","","color","primary",3,"click"],["mat-table","","class","mat-elevation-z8 matTable",3,"dataSource",4,"ngIf","ngIfElse"],["class","example-list"],["cuentasVacia",""],["mat-table","",1,"mat-elevation-z8","matTable",3,"dataSource"],["matColumnDef","banco"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","numero_cuenta"],["matColumnDef","opcion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","disabled","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""],[1,"example-box"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1")(3,"mat-icon",2),t._uU(4,"credit_card"),t.qZA(),t.TgZ(5,"span"),t._uU(6," Cuentas "),t.qZA()(),t.TgZ(7,"button",3),t.NdJ("click",function(){return i.abrirModal()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA(),t._uU(10," Agregar Cuenta "),t.qZA()()(),t.YNc(11,I,12,3,"table",4),t.YNc(12,Q,2,0,"ng-template",5,6,t.W1O)),2&e){const u=t.MAs(13);t.xp6(11),t.Q6J("ngIf",i.cuentasList&&i.cuentasList.length>0)("ngIfElse",u)}},dependencies:[p.O5,b.lW,q.Hw,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk],styles:[".mat-column-numero_cuenta[_ngcontent-%COMP%], .mat-column-banco[_ngcontent-%COMP%]{padding-right:1px}.mat-column-opcion[_ngcontent-%COMP%]{text-align:right}.example-list[_ngcontent-%COMP%]{width:500px;max-width:100%;border:solid 1px #595959;min-height:60px;display:block;background:595959;border-radius:4px;overflow:hidden;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.example-box[_ngcontent-%COMP%]{background:#424242;padding:20px 10px;border-bottom:solid 1px #595959;color:#fff;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;font-size:14px}"]}),a})()},{path:"**",redirectTo:""}]}];let j=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[h.Bz.forChild(D),h.Bz]}),a})();var w=n(2835);let z=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[p.ez,j,s.UX,w.q]}),a})()}}]);